System.register(["react","proxy-compare","use-sync-external-store/shim","valtio/vanilla"],function(p){"use strict";var c,a,u,b,y,h,g,l,o,i;return{setters:[function(e){c=e.useRef,a=e.useCallback,u=e.useMemo,b=e.useEffect},function(e){y=e.isChanged,h=e.createProxy},function(e){g=e.useSyncExternalStore},function(e){l=e.subscribe,o=e.snapshot,i=e.getVersion,p({getVersion:e.getVersion,proxy:e.proxy,ref:e.ref,snapshot:e.snapshot,subscribe:e.subscribe,unstable_getHandler:e.getHandler})}],execute:function(){p("useSnapshot",e);function e(n,x){const S=new WeakMap,f=c(),t=c(),k=x==null?void 0:x.sync,v=g(a(r=>{t.current=r;const s=l(n,r,k);return()=>{s(),t.current=void 0}},[n,k]),u(()=>{let r;return()=>{const s=o(n);try{if(r&&f.current&&!y(r,s,f.current,new WeakMap))return r}catch{}return r=s}},[n]),a(()=>o(n),[n])),E=i(n);b(()=>{f.current=S,E!==i(n)&&(t.current?t.current():typeof process=="object"&&process.env.NODE_ENV!=="production"&&console.warn("[Bug] last callback is undefined"))});const M=u(()=>new WeakMap,[]);return h(v,S,M)}}}});
